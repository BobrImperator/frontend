<SearchBox
  placeholder={{t "general.searchPlaceholder"}}
  @liveSearch={{true}}
  @search={{action "search"}}
  @clear={{action "clear"}}
/>
{{#if this.searching}}
  <ul class="lm-search-results">
    <li>
      {{t "general.currentlySearchingPrompt"}}
    </li>
  </ul>
{{else if this.searchResults.length}}
  <ul class="lm-search-results">
    {{#each this.searchResults as |learningMaterial|}}
      <li
        class={{if
          (contains learningMaterial (await @currentMaterials))
          "disabled"
          ""
        }}
        role="button"
        {{action (perform this.addLearningMaterial learningMaterial)}}
      >
        <h4 class="learning-material-title">
          <LmTypeIcon
            @type={{learningMaterial.type}}
            @mimetype={{learningMaterial.mimetype}}
          />
          <span data-test-title>
            {{learningMaterial.title}}
          </span>
        </h4>
        <span class="learning-material-description">
          {{! template-lint-disable no-triple-curlies }}
          {{{learningMaterial.description}}}
        </span>
        {{#if learningMaterial.status.title}}
          <span class="learning-material-status">
            {{learningMaterial.status.title}}
          </span>
        {{/if}}
        <ul class="learning-material-properties">
          <li>
            {{t "general.owner"}}:
            {{learningMaterial.owningUser.fullName}}
          </li>
          {{#if learningMaterial.originalAuthor}}
            <li>
              {{t "general.contentAuthor"}}:
              {{learningMaterial.originalAuthor}}
            </li>
          {{/if}}
          <li>
            {{t "general.uploadDate"}}:
            {{moment-format learningMaterial.uploadDate "M-D-YYYY"}}
          </li>
        </ul>
      </li>
    {{/each}}
    {{#if this.hasMoreSearchResults}}
      <li>
        <button
          disabled={{if this.searchMore.isRunning true}}
          {{action (perform this.searchMore)}}
        >
          <FaIcon
            @icon={{if this.searchMore.isRunning "spinner"}}
            @spin={{if this.searchMore.isRunning true false}}
          />
          {{t "general.showMore"}}
        </button>
      </li>
    {{/if}}
  </ul>
{{else if this.searchReturned}}
  <ul class="lm-search-results">
    <li>
      {{t "general.noSearchResultsPrompt"}}
    </li>
  </ul>
{{/if}}
