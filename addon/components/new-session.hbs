<h4>
  {{t "general.newSession"}}
</h4>
<div class="new-session-content">
  <div class="item">
    <label>
      {{t "general.title"}}:
    </label>
    <input
      type="text"
      value={{this.title}}
      class={{if
        (and (v-get this "title" "isInvalid") (contains "title" this.showErrorsFor))
        "has-error"
      }}
      data-test-title
      {{on "input" (action (mut this.title) value="target.value")}}
      {{on "keyup" (fn (action "addErrorDisplayFor") "title")}}
    >
    {{#if (and (v-get this "title" "isInvalid") (contains "title" this.showErrorsFor))}}
      <span class="validation-error-message">
        {{v-get this "title" "message"}}
      </span>
    {{/if}}
  </div>
  <div class="item">
    <label>
      {{t "general.sessionType"}}:
    </label>
    {{#if (is-fulfilled this.activeSessionTypes)}}
      <select data-test-type {{on "change" (action (mut this.selectedSessionTypeId) value="target.value")}}>
        {{#each (sort-by "title" (await this.activeSessionTypes)) as |sessionType|}}
          <option
            value={{sessionType.id}}
            selected={{eq sessionType.id (get (await this.selectedSessionType) "id")
            }}
          >
            {{sessionType.title}}
          </option>
        {{/each}}
      </select>
    {{else}}
      <LoadingSpinner />
    {{/if}}
  </div>
  <div class="buttons">
    <button
      class="done text"
      type="button"
      data-test-save
      {{on "click" (perform this.saveNewSession)}}
    >
      {{#if this.saveNewSession.isRunning}}
        <LoadingSpinner />
      {{else}}
        {{t "general.save"}}
      {{/if}}
    </button>
    <button class="cancel text" type="button" data-test-cancel {{on "click" this.cancel}}>
      {{t "general.cancel"}}
    </button>
  </div>
</div>
