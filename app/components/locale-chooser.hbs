<ClickOutside @onClickOutside={{action (mut isOpen) false}}>
  <button
    aria-label={{t (concat "general.language." locale.id)}}
    role="menuitem"
    class="toggle"
    aria-haspopup="true"
    aria-expanded={{if isOpen "true" "false"}}
    data-level="toggle"
    data-test-toggle
    {{action "toggleMenu"}}
  >
    <FaIcon @icon="globe" />
    <span>
      {{t (concat "general.language." locale.id)}}
    </span>
  </button>
  {{#if isOpen}}
    <div class="menu" role="menu">
      {{#each locales as |loc|}}
        <button
          role="menuitemradio"
          lang={{loc.id}}
          tabindex="-1"
          aria-checked={{if (eq locale.id loc.id) "true" "false"}}
          data-level="item"
          data-test-item
          {{action "changeLocale" loc.id}}
        >
          {{loc.text}}
        </button>
      {{/each}}
    </div>
  {{/if}}
</ClickOutside>
