{{#each sortedSessions as |obj|}}
  <tr class='{{if (contains obj.session expandedSessions) 'is-expanded' 'not-expanded'}} session-row'>
    <td colspan=1>
      {{#if (contains obj.session expandedSessions)}}
        {{fa-icon 'caret-down' class='link' click=(action closeSession obj.session)}}
      {{else}}
        {{fa-icon 'caret-right' class='link' click=(action expandSession obj.session)}}
      {{/if}}
    </td>
    <td colspan=8>
      {{#link-to 'session' obj.course obj.session}}
        {{truncate obj.title 100 true}}
      {{/link-to}}
    </td>
    <td colspan=6>{{obj.sessionTypeTitle}}</td>
    <td colspan=2>{{obj.learnerGroupCount}}</td>
    <td colspan=2>{{obj.objectiveCount}}</td>
    <td colspan=2>{{obj.termCount}}</td>
    <td colspan=4>
      {{#if obj.firstOfferingDate}}
        {{#if obj.isIlm}}
          <strong>{{t 'general.ilm'}}: {{t 'general.dueBy'}}</strong> {{moment-format obj.firstOfferingDate 'L'}}
        {{else}}
          {{moment-format obj.firstOfferingDate 'L LT'}}
        {{/if}}
      {{/if}}
    </td>
    <td colspan=2>{{obj.offeringCount}}</td>
    <td colspan=2>{{publication-status item=obj showText=false}}</td>
  </tr>
  {{#if (contains obj.session expandedSessions)}}
    <tr class='first-expanded-row is-expanded'>
      <td colspan=29>{{t 'general.offerings'}}</td>
    </tr>
    {{#each (sort-by 'startDate' (await obj.session.offerings)) as |offering|}}
      {{sessions-grid-offering offering=offering canUpdate=obj.canUpdate}}
    {{/each}}
    <tr class='last-expanded-row is-expanded'></tr>
  {{/if}}

{{/each}}
