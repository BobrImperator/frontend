<ClickOutside @onClickOutside={{action (mut this.isOpen) false}}>
  <button
    aria-label={{@title}}
    role="menuitem"
    class="toggle"
    aria-haspopup="true"
    aria-expanded={{if this.isOpen "true" "false"}}
    data-level="toggle"
    data-test-toggle
    {{action (toggle "isOpen" this)}}
  >
    <FaIcon @icon={{if @icon @icon "cloud"}} />
    <span>
      {{@title}}
    </span>
  </button>
  {{#if this.isOpen}}
    <div class="menu" role="menu" data-test-menu>
      {{#if @showAsIs}}
        <button class="danger" {{action "publish"}}>
          {{t "general.publishAsIs"}}
        </button>
      {{/if}}
      {{#if @showPublish}}
        <button class="good" {{action "publish"}}>
          {{t @publishTranslation}}
        </button>
      {{/if}}
      {{#if (and @showReview @reviewRoute @reviewObject)}}
        {{#if this.parentObject}}
          <button class="good" {{action "scrollToSessionPublication"}}>
            {{t
              "general.reviewMissingItems"
              count=(get @reviewObject "allPublicationIssuesLength")
            }}
          </button>
        {{else}}
          <button class="good" {{action "scrollToCoursePublication"}}>
            {{t
              "general.reviewMissingItems"
              count=(get @reviewObject "allPublicationIssuesLength")
            }}
          </button>
        {{/if}}
      {{/if}}
      {{#if @showTbd}}
        <button class="good" {{action "publishAsTbd"}}>
          {{t "general.markAsScheduled"}}
        </button>
      {{/if}}
      {{#if @showUnPublish}}
        <button class="danger" {{action "unpublish"}}>
          {{t @unPublishTranslation}}
        </button>
      {{/if}}
    </div>
  {{/if}}
</ClickOutside>
