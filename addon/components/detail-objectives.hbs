<div class="detail-objectives-header">
  {{#if this.isManaging}}
    <div class="title">
      {{#if this.isManagingParents}}
        <span class="specific-title">
          {{this.objectiveParentTitle}}
        </span>
      {{/if}}
      {{#if this.isManagingDescriptors}}
        <span class="specific-title">
          {{t "general.objectiveDescriptorTitle"}}
        </span>
      {{/if}}
      {{#if this.isManagingCompetency}}
        <span class="specific-title">
          {{t "general.objectiveCompetencyManagerTitle"}}
        </span>
      {{/if}}
    </div>
  {{else}}
    <div
      class="title {{if this.showCollapsible "clickable collapsible"}}"
      role="button"
      {{on "click" (fn this.collapseObjective)}}
    >
      {{t "general.objectives"}} ({{@subject.objectives.length}})
    </div>
  {{/if}}
  <div class="detail-objectives-actions">
    {{#if this.isManaging class="horizontal"}}
      <button class="bigadd" type="button" {{on "click" (fn this.save)}}>
        <FaIcon @icon="check" />
      </button>
      <button class="bigcancel" type="button" {{on "click" (fn this.cancel)}}>
        <FaIcon @icon="undo" />
      </button>
    {{else if @editable}}
      {{#if @isCourse}}
        <LinkTo @route="course-visualize-objectives" @model={{@subject}}>
          <VisualizerCourseObjectives
            @course={{@subject}}
            @width={{20}}
            @height={{20}}
            @isIcon={{true}}
          />
        </LinkTo>
      {{/if}}
      <ExpandCollapseButton
        @value={{this.newObjectiveEditorOn}}
        @action={{fn this.toggleNewObjectiveEditor}}
      />
    {{/if}}
  </div>
</div>
<div class="detail-objectives-content">
  {{#if this.newObjectiveEditorOn class="vertical"}}
    <NewObjective
      @save={{fn this.saveNewObjective}}
      @cancel={{fn this.toggleNewObjectiveEditor}}
    />
  {{/if}}
  {{#liquid-unless this.isManaging class="horizontal"}}
    {{#if @isCourse}}
      <CourseObjectiveList
        @course={{@subject}}
        @editable={{@editable}}
        @manageParents={{fn this.manageParents}}
        @manageDescriptors={{fn this.manageDescriptors}}
      />
    {{/if}}
    {{#if this.isSession}}
      <SessionObjectiveList
        @subject={{@subject}}
        @editable={{@editable}}
        @manageParents={{fn this.manageParents}}
        @manageDescriptors={{fn this.manageDescriptors}}
      />
    {{/if}}
    {{#if this.isProgramYear}}
      <ProgramyearObjectiveList
        @subject={{@subject}}
        @editable={{@editable}}
        @manageDescriptors={{fn this.manageDescriptors}}
        @manageCompetency={{fn this.manageCompetency}}
      />
    {{/if}}
  {{else}}
    {{#if this.isManagingParents}}
      {{#if @isCourse}}
        <CourseObjectiveManager @courseObjective={{this.mangeParentsObjective}} />
      {{/if}}
      {{#if this.isSession}}
        <SessionObjectiveManager @sessionObjective={{this.mangeParentsObjective}} />
      {{/if}}
    {{/if}}
    {{#if this.isManagingDescriptors}}
      <ObjectiveManageDescriptors
        @editable={{@editable}}
        @objective={{this.manageDescriptorsObjective}}
      />
    {{/if}}
    {{#if this.isManagingCompetency}}
      <ObjectiveManageCompetency @objective={{this.manageCompetencyObjective}} />
    {{/if}}
  {{/liquid-unless}}
</div>
