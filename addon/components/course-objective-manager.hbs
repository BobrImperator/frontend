{{! template-lint-disable attribute-indentation }}
<div class="objectivetitle course-objective-title">
  {{! template-lint-disable no-triple-curlies }}
  {{{@courseObjective.title}}}
</div>
{{#unless this.loadAttr.isRunning}}
  {{#liquid-if (get (await this.cohortProxies) "length") class="horizontal"}}
    <label class="group-picker">
      <span class="choose-cohort-title">
        {{t "general.chooseCohortTitle"}}:
      </span>
      {{#if (gt (get (await this.cohortProxies) "length") 1)}}
        <OneWaySelect
          @value={{get (await this.selectedCohort) "id"}}
          @options={{await this.cohortProxies}}
          @optionTargetPath="id"
          @optionLabelPath="title"
          @update={{action "setSelectedCohort"}}
        />
      {{else}}
        {{get (await this.currentCohort) "title"}}
      {{/if}}
    </label>
    <ul class="parent-picker">
      {{#if (await this.currentCohort)}}
        {{#each
          (await
            (get (await this.currentCohort) "objectivesByCompetency")
          ) as |competency|
        }}
          <li data-test-competency>
            <h5 class="competency-title {{if competency.selected "selected"}}">
              {{if
                competency.noTitle
                (t "general.noAssociatedCompetency")
                competency.title
              }}
            </h5>
            <ul>
              {{#each (await competency.objectives) as |objective|}}
                {{#if objective.selected}}
                  <li class="selected">
                    <input
                      type={{if
                        (await
                          (get (await this.currentCohort) "allowMultipleParents")
                        )
                        "checkbox"
                        "radio"
                      }}
                      checked="checked"
                      {{on "click" (fn (action "removeParent") objective)}}
                    >
                    <span
                      class="clickable"
                      role="button"
                      {{on "click" (fn (action "removeParent") objective)}}
                    >
                      {{objective.textTitle}}
                    </span>
                  </li>
                {{else}}
                  <li>
                    <input
                      type={{if
                        (await
                          (get (await this.currentCohort) "allowMultipleParents")
                        )
                        "checkbox"
                        "radio"
                      }}
                      {{on "click" (perform this.addParent objective)}}
                    >
                    <span
                      class="clickable"
                      role="button"
                      {{on "click" (perform this.addParent objective)}}
                    >
                      {{objective.textTitle}}
                    </span>
                  </li>
                {{/if}}
              {{/each}}
            </ul>
          </li>
        {{/each}}
      {{/if}}
    </ul>
  {{else}}
    <div class="no-group">
      <p>
        {{t "general.missingCohortMessage"}}
      </p>
    </div>
  {{/liquid-if}}
{{/unless}}
